{"openapi":"3.1.0","info":{"title":"API","description":"API version 1.0.0","version":"1.0.0","contact":{"name":"","email":""},"x-logo":{"url":""}},"servers":[{"url":"http://127.0.0.1:3000"}],"paths":{"/v0/conversations":{"get":{"tags":["Chat"],"summary":"List conversations.","operationId":"handle_get_conversation_history_v0_conversations_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/v0/conversations/{conversation_id}":{"get":{"tags":["Chat"],"summary":"Retrieve a conversation, including all message history within.","operationId":"handle_get_conversation_history_v0_conversations__conversation_id__get","parameters":[{"description":"The ID of the conversation.","required":true,"schema":{"type":"string","title":"Conversation Id","description":"The ID of the conversation."},"name":"conversation_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["Chat"],"summary":"Send a message to the copilot.","operationId":"handle_conversation_v0_conversations__conversation_id__post","parameters":[{"description":"\nThe ID of the conversation. To start a new conversation, you should pass in a random uuid version 4 (Python: `import uuid; uuid.uuid4()`). To continue a conversation, re-use the same uuid.\n","required":true,"schema":{"type":"string","title":"Conversation Id","description":"\nThe ID of the conversation. To start a new conversation, you should pass in a random uuid version 4 (Python: `import uuid; uuid.uuid4()`). To continue a conversation, re-use the same uuid.\n"},"name":"conversation_id","in":"path"},{"required":false,"schema":{"type":"string","title":"Email"},"name":"email","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/ConversationInput"}],"title":"Payload","description":"Input and parameters for the conversation."}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/v0/conversations/{conversation_id}/stream":{"post":{"tags":["Chat"],"summary":"Send a message to the copilot and get the response as a stream.","operationId":"handle_conversation_streaming_v0_conversations__conversation_id__stream_post","parameters":[{"description":"\nThe ID of the conversation. To start a new conversation, you should pass in a random uuid version 4 (Python: `import uuid; uuid.uuid4()`). To continue a conversation, re-use the same uuid.\n","required":true,"schema":{"type":"string","title":"Conversation Id","description":"\nThe ID of the conversation. To start a new conversation, you should pass in a random uuid version 4 (Python: `import uuid; uuid.uuid4()`). To continue a conversation, re-use the same uuid.\n"},"name":"conversation_id","in":"path"},{"required":false,"schema":{"type":"string","title":"Email"},"name":"email","in":"header"}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/ConversationInput"}],"title":"Payload","description":"Input and parameters for the conversation."}}},"required":true},"responses":{"200":{"description":"\nA stream of objects, delimited by newlines. Each object will be of the following form:\n```\n{\n    \"text\": \"some text\" # the next chunk of the message from the copilot\n    \"error\": \"\"         # if present, a string description of the error that occurred\n}\n```\n\nFor example, the message \"I like to eat apples\" might be streamed as follows:\n\n```\n{\"text\": \"I like\"}\n{\"text\": \" to eat\"}\n{\"text\": \" apples\"}\n```\n","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"APIKeyHeader":[]}]}},"/v0/debug/{conversation_id}/{message_id}":{"get":{"tags":["Debug"],"summary":"Get detailed debug information about a message.","operationId":"get_copilots_v0_debug__conversation_id___message_id__get","parameters":[{"description":"The ID of the conversation.","required":true,"schema":{"type":"string","title":"Conversation Id","description":"The ID of the conversation."},"name":"conversation_id","in":"path"},{"description":"The ID of the response message.","required":true,"schema":{"type":"string","title":"Message Id","description":"The ID of the response message."},"name":"message_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetMessageDebugResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v0/tokens":{"post":{"tags":["Authorization"],"summary":"Generate a JSON Web Token.","operationId":"evaluate_v0_tokens_post","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/TokenRequest"}],"title":"Request","description":"Token generation input"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Returns API information","description":"Returns API information","operationId":"root__get","responses":{"200":{"description":"API information with title, description and version.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiInfo"}}}}}}}},"components":{"schemas":{"ApiInfo":{"properties":{"title":{"type":"string","title":"Title"},"description":{"type":"string","title":"Description"},"version":{"type":"string","title":"Version"}},"type":"object","required":["title","description","version"],"title":"ApiInfo","example":{"title":"API","description":"API","version":"0.1"}},"ConversationInput":{"properties":{"message":{"type":"string","title":"Message","description":"Message to be answered by the copilot.","example":"How do I make a delicious lemon cheesecake?"},"response_message_id":{"type":"string","title":"Response Message Id"}},"type":"object","required":["message"],"title":"ConversationInput","example":{"message":"How do I make a delicious lemon cheesecake?"}},"GetMessageDebugResponse":{"properties":{"response":{"type":"string","title":"Response","description":"Response status, either OK or NOK."},"prompt_template":{"allOf":[{"$ref":"#/components/schemas/ValueWithTokens"}],"title":"Prompt Template","description":"Prompt template used."},"data_sources":{"type":"string","title":"Data Sources","description":"List of data sources used in string json format."},"user_question":{"allOf":[{"$ref":"#/components/schemas/ValueWithTokens"}],"title":"User Question","description":"User question."},"context":{"allOf":[{"$ref":"#/components/schemas/ValueWithTokens"}],"title":"Context","description":"List of context strings used the final prompt in json format."},"chat_history":{"allOf":[{"$ref":"#/components/schemas/ValueWithTokens"}],"title":"Chat History","description":"Chat history used in the final prompt in json format."},"full_prompt":{"allOf":[{"$ref":"#/components/schemas/ValueWithTokens"}],"title":"Full Prompt","description":"Final prompt used in the LLM call."},"llm_response":{"allOf":[{"$ref":"#/components/schemas/ValueWithTokens"}],"title":"Llm Response","description":"LLM answer."}},"type":"object","required":["response"],"title":"GetMessageDebugResponse","example":{"response":"OK","prompt_template":"You are a copilot.\n{context} {history} {answer}","data_sources":["{}"],"user_question":"Who are you?","context":["[{\"page_content\": \"This is some text from the data files.\", \"metadata\": {\"source\": \"copilots/data/test.txt\"}}]"],"chat_history":["[{\"user\": \"Who are you?\", {\"copilot\": \"I am a copilot.\"}]"],"full_prompt":"Full formatted prompt text here","llm_response":"I am a copilot."}},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"TokenRequest":{"properties":{"client_id":{"type":"string","title":"Client Id","description":"Client id"},"client_secret":{"type":"string","title":"Client Secret","description":"Client secret"},"user_id":{"type":"string","title":"User Id","description":"User id"}},"type":"object","required":["client_id","client_secret","user_id"],"title":"TokenRequest"},"TokenResponse":{"properties":{"response":{"type":"string","title":"Response","description":"Response status, either OK or NOK."},"token":{"type":"string","title":"Token","description":"JWT token"}},"type":"object","required":["response","token"],"title":"TokenResponse","example":{"response":"OK","token":"e91042aa-d53a-41eb-8884-67aa4947982d"}},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"ValueWithTokens":{"properties":{"value":{"type":"string","title":"Value"},"token_count":{"type":"integer","title":"Token Count","description":"If debug mode is enabled will include token counts."}},"type":"object","required":["value"],"title":"ValueWithTokens"}},"securitySchemes":{"APIKeyHeader":{"type":"apiKey","in":"header","name":"Authorization"}}},"x-readme":{"samples-languages":["curl","node","javascript","python"]}}